var dp=(function(l,g){var z={};z.eventIdList_HRT_Config="";z.formIdList_HRT_Config="";z.urlList_HRT_Config="";z.eventIdList_HRT_Config_Last="";z.formIdList_HRT_Config_Last="";z.urlList_HRT_Config_Last="";z.firstPartyBlackbox="";z.thirdPartyBlackbox="";z.firstPartyEnabled=false;z.thirdPartyEnabled=false;z.start;z.timeOutDuration;z.firstPartyCallBackExecuted=false;z.thirdPartyCallBackExecuted=false;z.callbackRba=null;z.excludeDpSnippets=false;z.devicePrintRegionalCallback=null;var s="0400blackBoxIdNotAvailable";var v="_eventId";var k="firstPartyBlackboxId";var w="thirdPartyBlackboxId";var c=null;var q=null;var e=null;var h=null;var m=null;var j=null;var B=null;var x=null;z.setUpDp=function(D,E,C){if(D!=""){z.thirdPartyEnabled=true;d(D)}if(E!=""&&C!=""){z.firstPartyEnabled=true;d(E).success(function(){d(C)})}z.start=new Date();b();g(document).ready(function(){z.setupFormSubmitHandler()})};z.collectDpSyncAction=function(C){if(devicePrintEnabled==false||z.excludeDpSnippets==true){l.open(C,"_self")}else{if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){q=C;o()}else{q=C;m="SyncAction";t()}}};z.partialRefreshCollectDp=function(C){amwClientParam.antiMalwareAjaxParam();closeOpenWins();emailFlag=false;if(typeof leftNavAjax!="undefined"){leftNavAjax.abort()}var E=jQuery("#leftNavBodySpinner");var D=jQuery("#appBody");E.jfpwidget("block","#appBodyWrapper");E.parent().css("top","300px");D.css("visibility","hidden");jQuery(".cbolui-spinnerText").removeClass("cM-hide cbolui-hidden");jQuery(".cbolui-spinnerText").show();jQuery("#comQs").jfpwidget("block",".cA-sidebarFAQSection");jQuery("#sidebarFAQSection").empty();p(C,function(G,F,H){l.scrollTo(0,0);g("#appHeader .cbolui-modules-headerPrintLinks").addClass("cbolui-modules-headerPrintLinks-hide");if(g("html").hasClass("cbolui-html")){G=citiUniversal.common.pageUtilityModule.handleRBAResponse(G,H,C);citiUniversal.forms.unbindLeaveConfirmation()}else{G=citiGlobal.common.rbaUtilitiesModule.handleRBAResponse(G,H,C);citiGlobal.common.formUtilitiesModule.unbindLeaveConfirmation()}if(G!=null){if(G.indexOf("otpinOverlay321968")===-1){g("#appBody").html("");g("#appBody").html(G)}D.css("visibility","visible");E.jfpwidget("unblock");if(typeof(waitForMainApp)!="undefined"&&waitForMainApp==false){E.jfpwidget("unblock")}jQuery("#sidebarFAQSection").empty();jQuery("#sidebarFAQSection").html(g("#rightPanelHiddenFAQSection").html());jQuery("#comQs").jfpwidget("unblock")}jQuery(".cbolui-spinnerText").hide()})};function p(D,E){if(devicePrintEnabled==false||z.excludeDpSnippets==true){var C={type:"GET",url:D};g.ajax(C).success(function(G,F,H){E(G,F,H)})}else{if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){q=D;e=E;a();q=null}else{q=D;e=E;m="PartialRefLeftNav";t()}}}function d(C){options={dataType:"script",cache:false,url:C};return g.ajax(options)}function b(){g.ajaxSetup({beforeSend:function(F,D){try{if((z.eventIdList_HRT_Config!="")&&(D.dataType!="script")&&(D.sameAjaxMade!=true)&&(D.url.indexOf("/CBOL/sec/otp/flow.action")==-1)){if(f(D)==true){amwClientParam.antiMalwareAjaxParam();var C=D.type;if(C.toLowerCase()=="get"){F.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");D.hasContent=true;D.type="POST"}if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){if(typeof(D.data)==="undefined"||D.data==null){D.data=""}D.data=D.data+"&"+k+"="+s;D.data=D.data+"&"+w+"="+s}else{j=D;h=F;m="AsyncBeforeSend";t()}}}}catch(E){console.log("dp before send error: "+E)}}})}function a(){var D="";var E="";if(z.firstPartyBlackbox==""){D=s}else{D=z.firstPartyBlackbox}if(z.thirdPartyBlackbox==""){E=s}else{E=z.thirdPartyBlackbox}var C={type:"POST",data:k+"="+D+"&"+w+"="+E,url:q};g.ajax(C).success(function(G,F,H){e(G,F,H)})}function o(){var G=encodeURIComponent(encrString);var C=encodeURIComponent(initVecString);var F=document.createElement("form");g(F).attr("method","POST");g(F).attr("action",q);g("body").append(F);var D="";var E="";if(z.firstPartyBlackbox==""){D=s}else{D=z.firstPartyBlackbox}if(z.thirdPartyBlackbox==""){E=s}else{E=z.thirdPartyBlackbox}g(F).append('<input id="firstPartyBlackboxId" type="hidden" name="'+k+'" value="'+D+'" />');g(F).append('<input id="thirdPartyBlackboxId" type="hidden" name="'+w+'" value="'+E+'" />');g(F).append('<input id="trusteerResponse" type="hidden" name="`" value="'+G+'" />');g(F).append('<input id="initializationVector" type="hidden" name="initializationVector" value="'+C+'" />');g(F).append('<input id="signHexString" type="hidden" name="signHexString" value="'+signString+'" />');F.submit()}function f(G){var E="";if((typeof G.data!=="undefined")&&G.data!=""){E=u(G.data.toString(),v)}if(E==""){var D=G.url;if(D.indexOf("?")>-1){var C=D.substr(D.indexOf("?")+1);E=u(C,v)}}if(E!=""){var H=z.eventIdList_HRT_Config.split(",");for(var F=0;F<H.length;F++){if(g.trim(H[F])==E){return true}}}return false}function r(){if(typeof citiUniversal!=="undefined"){citiUniversal.common.pageUtilityModule.setUpJamp("#appBody")}else{if(typeof citiGlobal!=="undefined"){citiGlobal.common.initialPageSetupModule.setUpJamp("#appBody")}}jQuery("#CBOLSpinner").jfpwidget("block","#appBody");jQuery("#CBOLSpinner_Text").removeClass("cbolui-hidden");g(".blockUI.blockMsg.blockElement").css("top","400px")}function i(C){if(typeof(C.data)==="undefined"||C.data==null){C.data=""}if(z.firstPartyBlackbox==""){C.data=C.data+"&"+k+"="+s}else{C.data=C.data+"&"+k+"="+z.firstPartyBlackbox}if(z.thirdPartyBlackbox==""){C.data=C.data+"&"+w+"="+s}else{C.data=C.data+"&"+w+"="+z.thirdPartyBlackbox}}z.forceCollectDevicePrint=function(){try{if(z.firstPartyBlackbox==""&&z.firstPartyEnabled){var F="";var E=fpGetBlackbox();F=E.blackbox;if((typeof F!=="undefined")&&(F!==null)){z.firstPartyBlackbox=F}z.my_log("bbid got from fpGetBlackbox is "+F)}}catch(G){console.log("Exception While calling fpGetBlackbox() method !!! "+G)}try{if(z.thirdPartyBlackbox==""&&z.thirdPartyEnabled){var C="";var D=ioGetBlackbox();C=D.blackbox;if((typeof C!=="undefined")&&(C!==null)){z.thirdPartyBlackbox=C}z.my_log("bbid got from ioGetBlackbox is "+C)}}catch(G){console.log("Exception While calling ioGetBlackbox() method !!! "+G)}};z.setupFormSubmitHandler=function(){if(z.eventIdList_HRT_Config!=""){g("form").each(function(){x=this.submit;this.submit=function(){var C=g(this).serialize();if(typeof C!=="undefined"){if((C.indexOf(k)>-1)||(C.indexOf(w)>-1)){x.apply(this);return}}if(A(this)==true){m="FullFormSubmit";B=this;if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){n()}else{t()}}else{x.apply(this)}};g(this).submit(function(C){if(A(this)==true){C.preventDefault();m="FullFormSubmit";B=this;if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){n()}else{t()}}})})}};function A(G){var E="";var I=g(G).serialize();if(z.eventIdList_HRT_Config!=""){if((typeof I!=="undefined")&&I!=""){E=u(I,v)}if(E==""){var D=g(G).attr("action");if(D.indexOf("?")>-1){var C=D.substr(D.indexOf("?")+1);E=u(C,v)}}if(E!=""){var H=z.eventIdList_HRT_Config.split(",");for(var F=0;F<H.length;F++){if(g.trim(H[F])==E){return true}}}}return false}function n(){var F=encodeURIComponent(encrString);var C=encodeURIComponent(initVecString);var D="";var E="";if(z.firstPartyBlackbox==""){D=s}else{D=z.firstPartyBlackbox}if(z.thirdPartyBlackbox==""){E=s}else{E=z.thirdPartyBlackbox}g(B).attr("method","POST");g(B).append('<input id="firstPartyBlackboxId" type="hidden" name="'+k+'" value="'+D+'" />');g(B).append('<input id="thirdPartyBlackboxId" type="hidden" name="'+w+'" value="'+E+'" />');g(B).append('<input id="trusteerResponse" type="hidden" name="trusteerResponse" value="'+F+'" />');
g(B).append('<input id="initializationVector" type="hidden" name="initializationVector" value="'+C+'" />');g(B).append('<input id="signHexString" type="hidden" name="signHexString" value="'+signString+'" />');x.apply(B)}function u(H,C){var E=H;var F=E.split("&");for(var D=0;D<F.length;D++){var G=F[D].split("=");if(G[0]==C){return G[1]}}return""}function t(){if(z.firstPartyEnabled==true&&z.thirdPartyEnabled==true){if(z.firstPartyBlackbox==""||z.thirdPartyBlackbox==""){y();c=setTimeout(function(){z.continueOperation()},z.timeOutDuration)}else{z.continueOperation()}}else{if(z.firstPartyEnabled==true){if(z.firstPartyBlackbox==""){y();c=setTimeout(function(){z.continueOperation()},z.timeOutDuration)}else{z.continueOperation()}}else{if(z.thirdPartyEnabled==true){if(z.thirdPartyBlackbox==""){y();c=setTimeout(function(){z.continueOperation()},z.timeOutDuration)}else{z.continueOperation()}}}}}z.continueOperation=function(){if((typeof z.devicePrintRegionalCallback!=="undefined")&&(z.devicePrintRegionalCallback!=null)){if(dp.firstPartyEnabled==true&&dp.thirdPartyEnabled==true){if(dp.firstPartyBlackbox!=""&&dp.thirdPartyBlackbox!=""){z.devicePrintRegionalCallback()}}else{if(dp.firstPartyEnabled==true){if(dp.firstPartyBlackbox!=""){z.devicePrintRegionalCallback()}}else{if(dp.thirdPartyEnabled==true){if(dp.thirdPartyBlackbox!=""){z.devicePrintRegionalCallback()}}}}}if((typeof z.callbackRba!=="undefined")&&(z.callbackRba!=null)){z.callbackRba()}if(m==null){return}if(c!=null){clearTimeout(c);c=null}if(m=="PartialRefLeftNav"){if(q!=null&&e!=null){z.forceCollectDevicePrint();a();q=null}}else{if(m=="SyncAction"){if(q!=null){z.forceCollectDevicePrint();o();q=null}}else{if(m=="AsyncBeforeSend"){if(j!=null&&h!=null){z.forceCollectDevicePrint();i(j);if(typeof j.rollbackAjaxWithoutError!=="undefined"&&j.rollbackAjaxWithoutError==true){j.sameAjaxMade=true;g.ajax(j)}j=null;h=null}}else{if(m="FullFormSubmit"){z.forceCollectDevicePrint();n()}}}}m=null};function y(){if(m=="SyncAction"){r()}else{if(m=="AsyncBeforeSend"){j.rollbackAjaxWithoutError=true;h.abort();r()}else{if(m="FullFormSubmit"){r()}}}}z.isDevicePrintCollected=function(){if(z.firstPartyEnabled==false&&z.thirdPartyEnabled==false){return true}else{if(z.firstPartyEnabled==true&&z.thirdPartyEnabled==true){if(z.firstPartyBlackbox==""||z.thirdPartyBlackbox==""){return false}else{return true}}else{if(z.firstPartyEnabled==true){if(z.firstPartyBlackbox==""){return false}else{return true}}else{if(z.thirdPartyEnabled==true){if(z.thirdPartyBlackbox==""){return false}else{return true}}}}}};z.getFirstPartyBlackBoxId=function(){z.forceCollectDevicePrint();var C="";if(z.firstPartyBlackbox==""){C=s}else{C=z.firstPartyBlackbox}return C};z.getThirdPartyBlackBoxId=function(){z.forceCollectDevicePrint();var C="";if(z.thirdPartyBlackbox==""){C=s}else{C=z.thirdPartyBlackbox}return C};z.my_log=function(C){try{var D=(new Date()).getTime()-z.start.getTime();console.log("["+(D/1000)+"] "+C)}catch(E){}};return z}(window,window.jQuery));var fp_bb_callback=function(a,b){if(b){if((dp.firstPartyCallBackExecuted==false)&&(typeof a!=="undefined")&&(a!==null)){dp.firstPartyBlackbox=a;dp.firstPartyCallBackExecuted=true;dp.continueOperation()}}};var io_bb_callback=function(a,b){if(b){if((dp.thirdPartyCallBackExecuted==false)&&(typeof a!=="undefined")&&(a!==null)){dp.thirdPartyBlackbox=a;dp.thirdPartyCallBackExecuted=true;dp.continueOperation()}}};